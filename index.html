<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Material Request Form</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input[type="text"], input[type="number"], input[type="email"], select, textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .checkbox-group, .radio-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .checkbox-item, .radio-item {
            display: flex;
            align-items: center;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        #checkboxContainer {
            margin-top: 20px;
        }
        .file-name {
            margin-left: 10px;
            color: #4CAF50;
        }
    </style>
</head>
<body>
    <h1>Material Request Form</h1>
    <form id="materialRequestForm">
        <!-- Previous form fields remain unchanged -->
        
        <div class="form-group">
            <label>Sales markets:</label>
            <div class="checkbox-group" id="salesMarkets">
                <div class="checkbox-item">
                    <input type="checkbox" id="worldwide" name="salesMarkets" value="Worldwide">
                    <label for="worldwide">Worldwide</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="asiaAfricaAustralia" name="salesMarkets" value="Asia/Africa/Australia">
                    <label for="asiaAfricaAustralia">Asia/Africa/Australia</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="centralEastEurope" name="salesMarkets" value="Central/East Europe">
                    <label for="centralEastEurope">Central/East Europe</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="europe" name="salesMarkets" value="Europe">
                    <label for="europe">Europe</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="latinAmerica" name="salesMarkets" value="Latin America">
                    <label for="latinAmerica">Latin America</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="middleEast" name="salesMarkets" value="Middle East">
                    <label for="middleEast">Middle East</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="northAmerica" name="salesMarkets" value="North America">
                    <label for="northAmerica">North America</label>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label>Has formula contact:</label>
            <div class="radio-group">
                <div class="radio-item">
                    <input type="radio" id="hasFormulaContactYes" name="hasFormulaContact" value="yes">
                    <label for="hasFormulaContactYes">Yes</label>
                </div>
                <div class="radio-item">
                    <input type="radio" id="hasFormulaContactNo" name="hasFormulaContact" value="no">
                    <label for="hasFormulaContactNo">No</label>
                </div>
            </div>
        </div>

        <div class="form-group" id="usedForTransportOnlyGroup" style="display: none;">
            <label>Used for Transport only (e.g. shipping box):</label>
            <div class="radio-group">
                <div class="radio-item">
                    <input type="radio" id="usedForTransportOnlyYes" name="usedForTransportOnly" value="yes">
                    <label for="usedForTransportOnlyYes">Yes</label>
                </div>
                <div class="radio-item">
                    <input type="radio" id="usedForTransportOnlyNo" name="usedForTransportOnly" value="no">
                    <label for="usedForTransportOnlyNo">No</label>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label for="countryOfOrigin">Country of origin:</label>
            <select id="countryOfOrigin" name="countryOfOrigin">
                <option value="">Select a country</option>
                <option value="germany">Germany</option>
                <option value="france">France</option>
                <option value="italy">Italy</option>
                <option value="spain">Spain</option>
                <option value="uk">United Kingdom</option>
            </select>
        </div>

        <div class="form-group">
            <label for="supplier">Supplier:</label>
            <input type="text" id="supplier" name="supplier">
        </div>

        <div class="form-group">
            <label for="manufacturerLink">Manufacturer/Product link (optional):</label>
            <input type="text" id="manufacturerLink" name="manufacturerLink">
        </div>

        <div class="form-group">
            <label for="supplierContact">Mail/phone supplier contact (optional):</label>
            <input type="text" id="supplierContact" name="supplierContact">
        </div>

        <div class="form-group">
            <label for="materialName">Material Name (max. 30 characters):</label>
            <input type="text" id="materialName" name="materialName" maxlength="30">
        </div>

        <div class="form-group">
            <label>Material classification:</label>
            <div>
                <label for="materialGroup">Group:</label>
                <select id="materialGroup" name="materialGroup">
                    <option value="">Select a group</option>
                    <option value="group1">Group 1</option>
                    <option value="group2">Group 2</option>
                    <option value="group3">Group 3</option>
                </select>
            </div>
            <div>
                <label for="materialType">Type:</label>
                <input type="text" id="materialType" name="materialType">
            </div>
            <div>
                <label for="materialSubtype">Subtype:</label>
                <input type="text" id="materialSubtype" name="materialSubtype">
            </div>
        </div>

        <div class="form-group">
            <label for="color">Color:</label>
            <select id="color" name="color">
                <option value="">Select a color</option>
                <option value="red">Red</option>
                <option value="blue">Blue</option>
                <option value="green">Green</option>
                <option value="yellow">Yellow</option>
                <option value="black">Black</option>
                <option value="white">White</option>
            </select>
        </div>

        <div class="form-group">
            <label for="opacity">Opacity:</label>
            <select id="opacity" name="opacity">
                <option value="">Select opacity</option>
                <option value="transparent">Transparent</option>
                <option value="translucent">Translucent</option>
                <option value="opaque">Opaque</option>
            </select>
        </div>

        <div class="form-group">
            <label>Made from renewable resources (ISCC+ certified):</label>
            <div class="radio-group">
                <div class="radio-item">
                    <input type="radio" id="renewableResourcesYes" name="madeFromRenewableResources" value="yes">
                    <label for="renewableResourcesYes">Yes</label>
                </div>
                <div class="radio-item">
                    <input type="radio" id="renewableResourcesNo" name="madeFromRenewableResources" value="no">
                    <label for="renewableResourcesNo">No</label>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label for="technicalExpertGroup">Technical expert Group:</label>
            <select id="technicalExpertGroup" name="technicalExpertGroup">
                <option value="">Select an expert group</option>
                <option value="group1">Expert Group 1</option>
                <option value="group2">Expert Group 2</option>
                <option value="group3">Expert Group 3</option>
            </select>
        </div>

        <div class="form-group">
            <label for="materialPredecessor">Material Predecessor:</label>
            <input type="text" id="materialPredecessor" name="materialPredecessor">
        </div>

        <div class="form-group">
            <label for="recyclingTechnology">Recycling Technology:</label>
            <select id="recyclingTechnology" name="recyclingTechnology">
                <option value="">Select a recycling technology</option>
                <option value="mechanical">Mechanical</option>
                <option value="chemical">Chemical</option>
                <option value="biological">Biological</option>
            </select>
        </div>

        <div class="form-group">
            <label>Recycled Content:</label>
            <div>
                <label for="pcrContent">Post-Consumer Recycled (PCR) [%]:</label>
                <input type="number" id="pcrContent" name="pcrContent" min="0" max="100">
            </div>
            <div>
                <label for="pirContent">Post-Industrial Recycled (PIR) [%]:</label>
                <input type="number" id="pirContent" name="pirContent" min="0" max="100">
            </div>
        </div>

        <div class="form-group">
            <label for="latestDeadline">Latest Deadline:</label>
            <input type="date" id="latestDeadline" name="latestDeadline">
        </div>

        <div class="form-group">
            <label for="requester">Requester:</label>
            <input type="text" id="requester" name="requester">
        </div>

        <button type="button" id="showCheckboxesButton">Show Checkboxes</button>

        <div id="checkboxContainer" style="display: none;">
            <!-- Checkboxes will be dynamically added here -->
        </div>

        <div class="form-group">
            <label for="fileUpload">Upload File:</label>
            <input type="file" id="fileUpload" name="fileUpload" multiple>
        </div>

        <div class="form-group">
            <label for="emailAddress">Email Address:</label>
            <input type="email" id="emailAddress" name="emailAddress" required>
        </div>

        <button type="submit">Submit Request</button>
    </form>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('materialRequestForm');
            const hasFormulaContactRadios = document.getElementsByName('hasFormulaContact');
            const usedForTransportOnlyGroup = document.getElementById('usedForTransportOnlyGroup');
            const materialGroup = document.getElementById('materialGroup');
            const showCheckboxesButton = document.getElementById('showCheckboxesButton');
            const checkboxContainer = document.getElementById('checkboxContainer');
            const fileUpload = document.getElementById('fileUpload');

            // Show/hide "Used for Transport only" based on "Has formula contact"
            hasFormulaContactRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.value === 'no') {
                        usedForTransportOnlyGroup.style.display = 'block';
                    } else {
                        usedForTransportOnlyGroup.style.display = 'none';
                    }
                });
            });

            // Show checkboxes based on selected group
            showCheckboxesButton.addEventListener('click', function() {
                const selectedGroup = materialGroup.value;
                if (selectedGroup) {
                    checkboxContainer.innerHTML = ''; // Clear previous checkboxes
                    checkboxContainer.style.display = 'block';
                    let checkboxes;
                    switch (selectedGroup) {
                        case 'group1':
                            checkboxes = ['Checkbox 1', 'Checkbox 2', 'Checkbox 3'];
                            break;
                        case 'group2':
                            checkboxes = ['Checkbox 2', 'Checkbox 3', 'Checkbox 4'];
                            break;
                        case 'group3':
                            checkboxes = ['Checkbox 3', 'Checkbox 4', 'Checkbox 5'];
                            break;
                    }
                    checkboxes.forEach(checkbox => {
                        const checkboxItem = document.createElement('div');
                        checkboxItem.className = 'checkbox-item';
                        checkboxItem.innerHTML = `
                            <input type="checkbox" id="${checkbox}" name="groupCheckbox" value="${checkbox}">
                            <label for="${checkbox}">${checkbox}</label>
                        `;
                        checkboxContainer.appendChild(checkboxItem);
                    });
                } else {
                    alert('Bitte wählen Sie zuerst eine Gruppe aus.');
                }
            });

            // File upload handling
            fileUpload.addEventListener('change', function(e) {
                const files = e.target.files;
                if (files.length > 0) {
                    const checkedBoxes = checkboxContainer.querySelectorAll('input[type="checkbox"]:checked');
                    checkedBoxes.forEach(checkbox => {
                        const label = checkbox.nextElementSibling;
                        checkbox.style.display = 'none';
                        checkbox.checked = false; // Uncheck the checkbox
                        const fileNameSpan = document.createElement('span');
                        fileNameSpan.className = 'file-name';
                        fileNameSpan.textContent = Array.from(files).map(file => file.name).join(', ');
                        label.appendChild(fileNameSpan);
                    });
                    console.log('Files selected:', Array.from(files).map(file => file.name).join(', '));
                    alert(`Dateien "${Array.from(files).map(file => file.name).join(', ')}" wurden ausgewählt und den angehakten Checkboxen zugeordnet.`);
                }
            });

            // Form submission
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(form);
                const data = Object.fromEntries(formData.entries());
                
                // Handle multiple checkbox values for sales markets and group checkboxes
                data.salesMarkets = formData.getAll('salesMarkets');
                data.groupCheckboxes = formData.getAll('groupCheckbox');

                // Handle file uploads
                data.files = Array.from(fileUpload.files).map(file => file.name);

                console.log('Form Data:', data);
                
                // Here you would typically send the data to a server
                // For demonstration purposes, we'll just show an alert
                alert(`Form submitted successfully! Files will be sent to ${data.emailAddress}`);
                
                // In a real implementation, you would send the form data and files to a server
                // The server would then process the data and send an email with the attached files
                // Example server-side pseudo-code:
                /*
                server.post('/submit-form', (req, res) => {
                    const formData = req.body;
                    const files = req.files;
                    
                    // Process form data
                    // ...

                    // Send email with attached files
                    sendEmail(formData.emailAddress, 'Form Submission', formData, files);

                    res.send('Form submitted successfully');
                });
                */
            });

            // Autofill functionality for Country of origin
            const countryOfOrigin = document.getElementById('countryOfOrigin');
            const countries = ['Germany', 'France', 'Italy', 'Spain', 'United Kingdom'];
            
            countryOfOrigin.addEventListener('input', function() {
                const value = this.value.toLowerCase();
                const matchingCountry = countries.find(country => country.toLowerCase().startsWith(value));
                
                if (matchingCountry) {
                    this.value = matchingCountry;
                }
            });
        });
    </script>
</body>
</html>